@page "/admin/dashboard"
@attribute [Authorize]

@inject IFlatFileUserStore UserStore;

<h3>Dashboard, @(User?.DisplayName ?? "unknown")</h3>

@code {
    [CascadingParameter]
    private Task<AuthenticationState>? AuthenticationState { get; set; }

    private User? User { get; set; } = null!;

    protected override async Task OnInitializedAsync()
    {
        if (AuthenticationState != null)
        {
            var state = await AuthenticationState;

            User = await UserStore.FindByIdAsync(
                state.User.FindFirst(x => x.Type == ClaimTypes.Sid)!
                    .Value!
            );
        }
    }
}